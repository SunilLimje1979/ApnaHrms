{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Team</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
    <style>
        body { padding-top: 55px; background-color: #f8f9fa; }
        .navbar { background-color: #254b76; height: 55px; }
        .navbar-brand { color: white; font-size: 20px; margin-left: 10px; }
        .drawer { position: fixed; top: 55px; left: -100%; width: 70%; height: calc(100% - 55px); background-color: #f8f9fa; transition: left 0.3s ease; padding: 0; box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1); z-index: 1000; overflow-y: auto; }
        .drawer.open { left: 0; }
        .drawer ul { padding: 10px 20px; font-size: 15px; }
        /* Add other necessary styles from your dashboard here */
    </style>
</head>
<body>
     <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container-fluid d-flex align-items-center justify-content-center position-relative">
            <a href="{% url 'dashboard' %}" class="btn btn-link text-white me-2 p-0 fs-4" style="position: absolute; left: 15px;">
                <i class="bi bi-arrow-left"></i>
            </a>
            <span class="navbar-brand mb-0" style="font-size: 18px;">My Team</span>
        </div>
    </nav>

    <div id="drawer" class="drawer">
        <!-- You can copy the full drawer content from your dashboard.html here -->
        <ul>
            <li><a href="{% url 'dashboard' %}"><i class="bi bi-house-door"></i> Home</a></li>
            <!-- ... other menu items ... -->
             <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-calendar-check me-2"></i> Timesheet
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="{% url 'add_task' %}"><i class="bi bi-plus-circle me-2"></i>Insert Task</a></li>
                    <li><a class="dropdown-item" href="{% url 'task_list' %}"><i class="bi bi-list-task me-2"></i>View My Tasks</a></li>
                    <li><a class="dropdown-item" href="{% url 'my_team' %}"><i class="bi bi-people-fill me-2"></i>My Team</a></li>
                </ul>
            </li>
            <li><a href="{% url 'logout' %}"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="container mt-4">
        {% if messages %}
            {% for message in messages %}
            <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
        {% endif %}

        <div class="list-group">
            {% for member in team_members %}
                <a href="{% url 'team_member_tasks' member.employee_id %}" class="list-group-item list-group-item-action d-flex align-items-center">
                    <i class="bi bi-person-circle fs-3 me-3"></i>
                    <div>
                        <h5 class="mb-1">{{ member.full_name }}</h5>
                        <p class="mb-1 text-muted">{{ member.designation|default:'No Designation' }}</p>
                    </div>
                </a>
            {% empty %}
                <div class="alert alert-info">You have no team members assigned to you.</div>
            {% endfor %}
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Drawer open/close logic
        const menuBtn = document.getElementById("menuBtn");
        const drawer = document.getElementById("drawer");
        menuBtn.addEventListener("click", () => { drawer.classList.add("open"); });
        function closeDrawer() { drawer.classList.remove("open"); }
        window.addEventListener("click", function (event) {
            if (!drawer.contains(event.target) && !menuBtn.contains(event.target)) {
                closeDrawer();
            }
        });
    </script>
</body>
</html>